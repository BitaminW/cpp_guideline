# 포인터 정리

## 포인터 배열과 배열 포인터
배열 포인터와 포인터 배열의 차이점

### 포인터 배열
포인터 배열은 포인터들의 배열 즉 배열 요소들이 포인터들로 이루워져 있다.

```Cpp
	int a = 10;
	int b = 20;
	int c = 30;

	int* ptr[3] = { &a,&b,&c };

	for (int i = 0; i < 3; i++) {
		std::cout << ptr[i] << " : " << *ptr[i] << "\n";
	}
```
위와 같이 각각의 주소값을 가지는 포인터 변수를 가질 수 있다.

### 배열 포인터
배열 포인터란 배열을 포인터처럼 취급할 수 있는 특수한 포인터이다.
다음과 같이 배열이 있다.
```Cpp
int arr[3] = { 1,2,3 };
```
배열의 이름은 배열의 첫번째 요소의 주소값을 가진다.






## 이차원 배열 접근
  
```cpp
	int arr2[2][3] = { 1,2,3,4,5,6 };

	cout << arr2[0][3] << "\n";

```
다음과 같은 코드를 보면 arr2[0][3] 라는 코드가 있다. 인덱스를 넘겨서 넣었는데도 에러가 나지않는다 이는 다음과 같은 코드가 동일하기 떄문이다.

```cpp
	int arr[2][4] = { {1,2,3,4}, 
					  {5,6,7,8} };

	int arr2[2][3] = { 1,2,3,4,5,6 };
```

사실 2차원 배열을 설명하는 그림이라던지 작성을 할 떄 보기 쉽게 그리지만 정확히는 메모리가 일렬로 되어있기 때문이다.
그러므로 아래코드는 동일한 값이 나온다.

```cpp
	cout << arr2[0][3] << "\n";
	cout << *(arr2[0] + 3) << "\n";
	cout << *(arr2[1]) << "\n";
```

[출력결과]
```bash
4
```
여기서 2차원 배열에 대해 쉽게 이해하려면 2차원 배열이 사실 이중포인터가 아닌 일렬로 되어있는 메모리 공간에 있는 공간이라는 것이다. 또한 배열의 이름과 포인터의 차이를 알아야한다. c언어에서 배열의 이름을 출력해보면 배열의 시작주소가 나온다. 그렇다면 배열의 이름과 포인터는 같은 것인가?? 결론만 놓고보자면 아니다. 하지만 이러한 개념을 정말 알쏭달쏭하게 하는 것이 있다. 그건 아래에서 설명하겠다.

다음 코드를 보면 4개가 모두 동일한 값이 나온다.
```cpp
    int arr[3][3] = { 1,2,3,4,5,6,7,8,9 };

	cout << *(arr + 1) << "\n";    // 같은 값
	cout <<  (arr + 1) << "\n";    // 같은 값
	cout <<  (*arr + 3) << "\n";    // 같은 값
	cout << &arr[1][0] << "\n";	   // 같은 값

```
하지만 이 녀석들이 모두 동일한 값을 가지고 있지만 역참조를 하게되면 모두 동일한 값이 나올까???

```cpp
    int arr[3][3] = { 1,2,3,4,5,6,7,8,9 };

	cout << **(arr + 1) << "\n";    // 같은 값
	cout <<  *(arr + 1) << "\n";    // 같은 값
	cout <<  *(*arr + 3) << "\n";    // 같은 값
	cout << *&arr[1][0] << "\n";	   // 같은 값
```

[출력결과]
```bash
4
0115F890
4
4
```

보는것과 같이 동일한 값이 나오지 않는다. 주소값을 주는것을 볼 수 있는데 이 녀석이 무엇을 가르키는 녀석일까??
실행마다 위치가 달라지니 결론을 놓고 보자면 당연히 4를 가르키는 주소 값이다. 이 때  **(arr + 1) 이러한 연산을 보고
2차원 배열은 이중포인터가 아니냐?라는 생각을 가지게 된다.
배열의 이름은 배열의 시작주소와 동일하다.하지만 이것은 애매한것이 어정도의 범위를 가르키냐에 따라서 의미가 달라진다.

```cpp
	int arr[2][3] = { {1,2,3},{4,5,6} };
	cout << (arr + 1) << " << 동일함 >>  " << &arr[1] << "\n";
```
arr는 즉 배열의 이름은 배열의 [0]번 인덱스의 주소를 가진다. 즉 위 2차원 배열은 int (*p)[3] 와 동일한 표현이다.
3개짜리 int형 배열을 가지고 있다는 뜻이다. 그렇다면 p[0] = {1,2,3} p[1] = {4,5,6} 을 가르키고 있는것과 동일한 표현이다. 사실 이 인덱스로 접근한다는 것이 arr[0]은 사실 *(arr + 0) 과 동일하다. 다음 코드를 보자

```cpp
	int arr[2][3] = { {1,2,3},{4,5,6} };
	cout << *arr[1] << " == " << **(arr + 1) << "\n";
	cout << arr[1][2] << " == " << *(*(arr + 1) + 2) << "\n"; // 꼭 괄호를 적어줘야함
	cout << **(arr+1) + 2 << "\n";           
```

이 때 괄호가 중요하다 연산자 우선 순위로 인해서 맨 아래있는 표현은 4를 가르키는 값에 +2를 더해 6을 만들어버리는것이다.
즉 **(arr+1)이 먼저 일어나고 4를 가져온다음 2를 더하는것과 동일한 표현이다.절때 위랑 동일한 표현이 아니다. 배열의
값을 변경해보면 바로 확인 가능하다.
